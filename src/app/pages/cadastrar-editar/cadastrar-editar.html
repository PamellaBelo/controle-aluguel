
<div class="page-container" *ngIf="!mostrandoFormulario">
  <button class="botao-acao botao-adicionar" (click)="mostrarAdicionar()">Adicionar imóvel</button>
  <button class="botao-acao botao-editar" (click)="mostrarEditar()">Editar imóvel</button>
</div>


<div class="page-container" *ngIf="mostrandoFormulario">
  <form [formGroup]="form" (ngSubmit)="salvar()">
    <div formArrayName="imoveis">
      <div
        *ngFor="let imovel of imoveis.controls; let i = index"
        [formGroupName]="i"
        class="imovel-card"
      >
        <h2>Imóvel {{ i + 1 }}</h2>

        
        <label>
          Nome:
          <input type="text" formControlName="nome" />
        </label>

        
        <label>
          Endereço:
          <input type="text" formControlName="endereco" />
        </label>

      
        <label>
          Tipo de imóvel:
          <select formControlName="tipoImovel" (change)="onTipoImovelChange($event, i)">
            <option *ngFor="let tipo of tiposImovel" [value]="tipo.id">{{ tipo.nome }}</option>
            <option value="novo">+ Novo tipo de imóvel</option>
          </select>
        </label>

      
        <div *ngIf="mostrarNovoTipoImovel[i]">
          <input
            type="text"
            placeholder="Novo tipo de imóvel"
            (blur)="adicionarNovoTipoImovel($event, i)"
          />
        </div>

        
        <label>
          Data de aquisição:
          <input
            type="date"
            formControlName="dataAquisicao"
            placeholder="DD/MM/AAAA"
          />
        </label>

        
        <label>
          Grupo:
          <select formControlName="grupoId" (change)="onGrupoChange($event)">
            <option value="">Sem grupo</option>
            <option *ngFor="let grupo of grupos" [value]="grupo.id">{{ grupo.nome }}</option>
            <option value="novo">+ Novo grupo</option>
          </select>
        </label>

        
        <div *ngIf="mostrarNovoGrupo">
          <input
            type="text"
            placeholder="Nome do novo grupo"
            (blur)="adicionarNovoGrupo($event)"
          />
        </div>

        <hr />
      </div>
    </div>

    
    <div class="botoes-form">
      <button type="button" (click)="adicionarImovel()">+ Adicionar mais um imóvel</button>
      <br /><br />
      <button type="submit" [disabled]="form.invalid">Salvar</button>
      <button type="button" (click)="voltar()">Voltar</button>
    </div>
  </form>
</div>
